# Configuração Declarativa de Agentes
# Easy Agent Builder v0.1.0

version: "1.0"

# ===========================================
# Configuração Global
# ===========================================
defaults:
  model: "gemini-2.0-flash-exp"
  temperature: 0.7
  max_tokens: 2048

# ===========================================
# Agentes Individuais
# ===========================================
agents:
  # Agente de Pesquisa
  - name: "search_agent"
    type: "llm"
    model: "${defaults.model}"
    description: "Especialista em pesquisa web e análise de informações"
    instruction: |
      Você é um especialista em pesquisa. Use ferramentas de busca para encontrar
      informações atualizadas e forneça respostas bem estruturadas.
    tools:
      - google_search
      # - vertex_ai_search  # Habilitar quando configurado
    tags: ["research", "web", "search"]

  # Agente de Dados
  - name: "data_agent"
    type: "llm"
    model: "${defaults.model}"
    description: "Especialista em análise de dados e insights"
    instruction: |
      Você é um analista de dados. Analise dados fornecidos, identifique padrões
      e gere insights acionáveis. Use linguagem clara e evite jargão técnico.
    tools:
      - bigquery_query
      - data_visualization
    tags: ["data", "analytics", "insights"]

  # Agente de APIs
  - name: "api_agent"
    type: "llm"
    model: "${defaults.model}"
    description: "Especialista em integrações e APIs"
    instruction: |
      Você é um especialista em integrações. Ajude a conectar sistemas,
      orquestrar chamadas de API e transformar dados entre formatos.
    tools:
      - openapi_tool
      - http_request
    tags: ["integration", "api", "automation"]

  # Agente de Validação
  - name: "validation_agent"
    type: "llm"
    model: "${defaults.model}"
    description: "Especialista em validação e quality assurance"
    instruction: |
      Você é um validador de qualidade. Revise outputs de outros agentes,
      verifique precisão e sugira melhorias quando necessário.
    tags: ["qa", "validation", "review"]

# ===========================================
# Workflows (Multi-Agent)
# ===========================================
workflows:
  # Workflow de Pesquisa com Validação
  - name: "research_workflow"
    type: "sequential"
    description: "Pipeline de pesquisa com validação de qualidade"
    steps:
      - agent: "search_agent"
        output_key: "research_result"
      - agent: "validation_agent"
        input_key: "research_result"
        condition: "validate_accuracy"
    tags: ["research", "validated"]

  # Workflow de Análise Completa
  - name: "full_analysis_workflow"
    type: "sequential"
    description: "Pipeline completo de análise de dados"
    steps:
      - agent: "search_agent"
        output_key: "context"
      - agent: "data_agent"
        input_key: "context"
        output_key: "analysis"
      - agent: "validation_agent"
        input_key: "analysis"
    tags: ["analysis", "comprehensive"]

  # Workflow Paralelo de Análise
  - name: "parallel_research"
    type: "parallel"
    description: "Múltiplas pesquisas simultâneas"
    agents:
      - "search_agent"
      - "data_agent"
    aggregator: "validation_agent"
    tags: ["parallel", "research"]

  # Router Principal
  - name: "root_agent"
    type: "router"
    description: "Coordenador principal que delega para especialistas"
    model: "${defaults.model}"
    sub_agents:
      - name: "search_agent"
        routing_keywords: ["pesquisa", "buscar", "informação", "dados sobre", "tendências"]
      - name: "data_agent"
        routing_keywords: ["análise", "gráfico", "métricas", "relatório", "estatísticas"]
      - name: "api_agent"
        routing_keywords: ["integrar", "api", "conectar", "sistema", "webhook"]
    fallback_agent: "search_agent"
    tags: ["router", "main", "entry-point"]

# ===========================================
# Configurações de Tools
# ===========================================
tools:
  google_search:
    enabled: true
    config:
      max_results: 10
      safe_search: true

  bigquery_query:
    enabled: true
    config:
      project_id: "${env.GOOGLE_CLOUD_PROJECT}"
      location: "us"

  vertex_ai_search:
    enabled: false  # Habilitar quando configurado
    config:
      datastore: ""

  openapi_tool:
    enabled: true
    config:
      specs_dir: "./specs"

# ===========================================
# Tags e Categorias
# ===========================================
categories:
  research:
    description: "Agentes de pesquisa e busca"
    color: "blue"
  
  data:
    description: "Agentes de análise de dados"
    color: "green"
  
  integration:
    description: "Agentes de integração"
    color: "orange"
  
  qa:
    description: "Agentes de validação"
    color: "purple"
