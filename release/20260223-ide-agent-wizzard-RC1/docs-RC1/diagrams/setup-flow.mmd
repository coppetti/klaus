%% IDE Agent Wizard - Setup Flow Diagram
%% Use with Mermaid: https://mermaid.live

flowchart TD
    Start([Run ./setup.sh]) --> CheckConfig{init.yaml exists?}
    
    CheckConfig -->|NO| NewSetup[New Setup]
    CheckConfig -->|YES| ExistingSetup[Existing Setup]
    
    NewSetup --> ModeChoice{Choose Mode}
    ModeChoice -->|1| IDEOnly[IDE Only]
    ModeChoice -->|2| IDETelegram[IDE + Telegram]
    
    IDEOnly --> Template[Select Template]
    IDETelegram --> TelegramConfig[Configure Telegram]
    TelegramConfig --> Template
    
    Template --> Profile[Build Profile]
    Profile --> Identity[Agent Identity]
    Identity --> Review[Review & Confirm]
    Review --> Generate[Generate Files]
    Generate --> Done([Setup Complete!])
    
    ExistingSetup --> CurrentMode{Current Mode}
    CurrentMode -->|IDE Only| IDEOptions[1. Add Telegram<br/>2. Edit Settings<br/>3. Start Fresh]
    CurrentMode -->|IDE + Telegram| TelegramOptions[1. Remove Telegram<br/>2. Edit Settings<br/>3. Start Fresh]
    
    IDEOptions -->|Add Telegram| TelegramConfig
    IDEOptions -->|Edit Settings| EditMenu[Edit Menu]
    IDEOptions -->|Start Fresh| Confirm{Confirm Delete?}
    
    TelegramOptions -->|Remove Telegram| RemoveConfig[Disable Telegram]
    TelegramOptions -->|Edit Settings| EditMenu
    TelegramOptions -->|Start Fresh| Confirm
    
    Confirm -->|YES| NewSetup
    Confirm -->|NO| ExistingSetup
    
    EditMenu --> EditChoice{What to Edit?}
    EditChoice -->|1| EditAgent[Agent Identity]
    EditChoice -->|2| EditUser[User Profile]
    EditChoice -->|3| EditBoth[Both]
    
    EditAgent --> Review
    EditUser --> Review
    EditBoth --> Review
    RemoveConfig --> Done
    
    style Start fill:#4CAF50,color:#fff
    style Done fill:#4CAF50,color:#fff
    style CheckConfig fill:#2196F3,color:#fff
    style Confirm fill:#FF5722,color:#fff
