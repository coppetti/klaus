%% IDE Agent Wizard - Memory Categories & Types
%% How different types of information are stored

flowchart TB
    subgraph UserInteraction["User Interaction"]
        direction TB
        Question["User asks question"]
        Response["Agent responds"]
    end
    
    subgraph MemoryTypes["Memory Storage Types"]
        direction TB
        
        subgraph Conversation["CONVERSATION Category"]
            ConvStore["Store: Q&A Summary
            ---
            Q: How to use React hooks?
            A: You can use useState..."]
            ConvMeta["metadata:
            source: ide_connector
            timestamp: ISO8601
            user: John
            agent: Klaus"]
        end
        
        subgraph Facts["FACT Category"]
            FactStore["Store: Extracted Fact
            ---
            Project uses TypeScript
            with strict mode enabled"]
            FactMeta["metadata:
            type: fact
            source: ide_connector
            project: myapp"]
        end
        
        subgraph Preferences["PREFERENCE Category"]
            PrefStore["Store: User Preference
            ---
            User prefers detailed
            explanations with examples"]
            PrefMeta["metadata:
            type: preference
            importance: high"]
        end
        
        subgraph Technical["TECHNICAL Category"]
            TechStore["Store: Technical Detail
            ---
            Database: PostgreSQL 15
            ORM: SQLAlchemy 2.0"]
            TechMeta["metadata:
            type: technical
            stack: backend"]
        end
    end
    
    subgraph Retrieval["Retrieval Process"]
        direction TB
        Query["Query: 'database setup'"]
        
        subgraph Scoring["Scoring Algorithm"]
            S1["Split query:
            ['database', 'setup']"]
            S2["For each memory:
            score = keyword matches"]
            S3["Add recency bonus:
            newer = higher"]
            S4["Add access bonus:
            frequently accessed = higher"]
        end
        
        Results["Return top 5
        sorted by score"]
    end
    
    Question --> |"store_interaction()"| Conversation
    Response --> |"automatic"| Conversation
    
    Question --> |"store_fact()"| Facts
    Question --> |"store_fact()"| Preferences
    Question --> |"store_fact()"| Technical
    
    Query --> Scoring
    Conversation --> Scoring
    Facts --> Scoring
    Preferences --> Scoring
    Technical --> Scoring
    Scoring --> Results
    
    style UserInteraction fill:#E3F2FD
    style MemoryTypes fill:#E8F5E9
    style Retrieval fill:#FFF3E0
